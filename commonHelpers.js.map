{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryItemMarkup = (images) => {\n    \n   \n  return images.map((image) => {\n      \n      return `<li class=\"img\">\n       <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n         <img class=\"gallery-image\" src= \"${image.webformatURL}\"\n          data-source=\"${image.largeImageURL}\"\n           alt=\"${image.tags}\"/>\n           <ul class=\"description\">\n                  <li>\n                  <p>Likes</p>\n                  <p class=\"likes-one\">${image.likes}</p>\n                  </li>\n                  <li>\n                  <p>Views</p>\n                  <p class=\"likes-one\">${image.views}</p>\n                  </li>\n                  <li>\n                  <p>Comments</p>\n                  <p class=\"likes-one\">${image.comments}</p>\n                  </li>\n                  <li>\n                  <p>Downloads</p>\n                  <p class=\"likes-one\">${image.downloads}</p>\n                  </li>\n              </ul>\n        </a>\n      \n     </li>`\n   }).join('');\n  \n    \n}\n\n","\n\nimport axios from \"axios\";\n\nconst API_KEY = '43819074-06fd45097a02a2f47bb2a7010';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchPhotosByQuery(searchQuery, page = 1, perPage = 15) {\n    return axios.get(`${BASE_URL}`, {\n        params: {\n            key: API_KEY,\n            q: searchQuery,\n            image_type: 'photo',\n            per_page: perPage,\n            page: page,\n            safesearch: true,\n            orientation: 'horizontal'\n        }\n    });\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\n\n\n\n import { createGalleryItemMarkup } from \"./js/render-functions\";\n import { fetchPhotosByQuery } from \"./js/pixabay-api\";\n\n const galleryEl = document.querySelector('.gallery');\n const searchForm = document.querySelector('.js-search-form');\n const loader = document.querySelector('.js-loader');\n const searchLoadMore = document.querySelector('.js-load-more');\n const loadMore = document.querySelector('.load-two');\n \n let lightbox;\n let currentPage = 1;\n let searchQuery = '';\n let totalPages = 0;\n const perPage = 15;\n\n\n  \n\nasync function onSearchFormSubmit (event) {\n    event.preventDefault();\n     searchQuery = event.target.elements.searchKey.value.trim();\n    currentPage = 1\n  \n    if (searchQuery === \"\") {\n        \n        galleryEl.innerHTML = '';\n        event.target.reset();\n        iziToast.show({\n            \n            message: 'Input field can not be empty',\n            messageColor: 'black',\n            close: true,\n            backgroundColor: 'orange',\n            timeout: 3000,\n        });\n        searchLoadMore.classList.add('is-hidden');\n        return;\n    }\n    galleryEl.innerHTML = '';\n    loader.classList.remove('is-hidden');\n    searchLoadMore.classList.add('is-hidden');\n    \n\n    \n\n    try {\n\n         const { totalHits, data } = await fetchPhotosByQuery(searchQuery, currentPage, perPage);\n               if (data.total === 0) {\n                event.target.reset();\n                loader.classList.add('is-hidden');\n                iziToast.show({\n                \n                    message: \"Sorry, there are no images matching your search query. Please try again!\",\n                    messageColor: 'blue',\n                    close: true,\n                    backgroundColor: 'yellow',\n                    timeout: 3000,\n                });\n                \n                return;\n            }\n            \n            galleryEl.innerHTML = createGalleryItemMarkup(data.hits);\n            totalPages = Math.ceil(data.totalHits / perPage);\n            console.log(totalPages);\n            \n\n            if (!lightbox) {\n                lightbox = new SimpleLightbox('.gallery a', {\n                    captionsData: 'alt',\n                    captionPosition: 'bottom',\n                    captionDelay: 250\n                });\n            } else {\n                lightbox.refresh();\n            } \n\n            if (data.hits.length > 1) {\n                searchLoadMore.classList.remove('is-hidden'); // Показати кнопку, якщо є зображення\n            } else {\n                searchLoadMore.classList.add('is-hidden'); // Приховати кнопку, якщо немає зображень\n            }\n\n           \n\n            \n            \n    }  catch (error) {\n        console.log(error);\n      }\n      event.target.reset();\n      loader.classList.add('is-hidden');\n    }\n    \n   \nsearchForm.addEventListener(\"submit\", onSearchFormSubmit);\n\nsearchLoadMore.addEventListener(\"click\", async event => {\n    loader.classList.remove('is-hidden');\n    currentPage += 1;\n    searchLoadMore.classList.add('is-hidden');\n    \n   \n     try {\n          const { totalHits, data }  = await fetchPhotosByQuery(searchQuery, currentPage, perPage);\n          galleryEl.innerHTML += createGalleryItemMarkup(data.hits);\n          if (currentPage >= totalPages) {\n            searchLoadMore.classList.add('is-hidden');\n            loader.classList.add('is-hidden');\n            iziToast.show({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                messageColor: 'black',\n                close: true,\n                backgroundColor: 'orange',\n                timeout: 3000,\n            });\n        } else {\n            searchLoadMore.classList.remove('is-hidden');\n            \n        }\n         smoothScroll(); \n      \n    } catch (error) {\n       console.log(error);\n    }finally {\n        loader.classList.add('is-hidden');\n        \n    }\n     lightbox.refresh();\n   });\n\n    function smoothScroll() {\n     const cardHeight = galleryEl.firstElementChild.getBoundingClientRect().height;\n     window.scrollBy({\n         top: cardHeight * 2,\n         left: 0,\n         behavior: 'smooth',\n     });\n  }\n\n"],"names":["createGalleryItemMarkup","images","image","API_KEY","BASE_URL","fetchPhotosByQuery","searchQuery","page","perPage","axios","galleryEl","searchForm","loader","searchLoadMore","lightbox","currentPage","totalPages","onSearchFormSubmit","event","iziToast","totalHits","data","SimpleLightbox","error","smoothScroll","cardHeight"],"mappings":"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"}